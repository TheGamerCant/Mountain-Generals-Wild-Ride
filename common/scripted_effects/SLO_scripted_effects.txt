SLO_unlock_new_propaganda_slot = {
	clamp_variable = { var = SLO.unlocked_slots min = 0 max = SLO.propaganda_slots_max } 

	#If we have a slot left, initialise it
	if = {
		limit = { check_variable = { SLO.unlocked_slots < SLO.propaganda_slots_max } }
		
		if = { 
			limit = { check_variable = { SLO.unlocked_slots = 0 } }
			unlock_decision_category_tooltip = SLO_propaganda_decision_category
		}
		else = {  
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
		}
		
		set_variable = { SLO.propaganda_slot_frame_array^SLO.unlocked_slots = 2 }
		
		add_to_variable = { SLO.unlocked_slots = 1 }
	}
}

SLO_start_propaganda_campaign = {
	#Define variable SLO.propaganda_campaign_to_start before this
	
	#Only initiate the function if SLO.propaganda_campaign_to_start is valid
	if = {
		limit = {
			check_variable = { SLO.propaganda_campaign_to_start > -1 }
			check_variable = { SLO.propaganda_campaign_to_start < SLO.propaganda_GFX_array^num }
		}
	
		#Go over array, find available slot
		for_each_loop = {
			array = SLO.propaganda_slot_frame_array
			value = v
			index = i
			break = break
			
			if = {
				limit = { check_variable = { v = 2 } }		#If v = 2 then this slot is free
				
				set_variable = { SLO.propaganda_slot_campaign_array^i = SLO.propaganda_campaign_to_start }
				set_variable = { SLO.propaganda_slot_frame_array^i = 3 }
				set_variable = { SLO.propaganda_campaign_dates^i = global.num_days }
				
				country_event = { id = slovakia_hidden.1 days = var:SLO.propaganda_days_until_first_change }
				country_event = { id = slovakia_hidden.1 days = var:SLO.propaganda_days_until_second_change }
				
				set_temp_variable = { break = 1 }		#End the loop
			}
		}
		
		add_to_variable = { SLO.ongoing_propaganda_campaigns = 1 }
	}
	
	clear_variable = SLO.propaganda_campaign_to_start
}

SLO_end_propaganda_campaign = {
	#Define variable SLO.propaganda_campaign_to_end before this
	if = {
		limit = {
			check_variable = { SLO.propaganda_campaign_to_start > -1 }
			check_variable = { SLO.propaganda_campaign_to_start < SLO.propaganda_GFX_array^num }
		}
		#Cleaner code

		for_each_loop = {
			array = SLO.propaganda_slot_campaign_array
			value = v
			index = i
			break = break
			
			if = {
				limit = { check_variable = { v = SLO.propaganda_campaign_to_end } }		#Current one is the one we want to end
				
				set_variable = { SLO.propaganda_slot_frame_array^i = 2 }
				set_variable = { SLO.propaganda_campaign_dates^i = -1 }
				multiply_variable = { SLO.propaganda_PP_COST_array^SLO.propaganda_campaign_to_end = 2 }
				
				
				subtract_from_variable = { SLO.ongoing_propaganda_campaigns = 1 }
				
				set_temp_variable = { break = 1 }		#End the loop
			}
		}
	}
	
	clear_variable = SLO.propaganda_campaign_to_end
}

SLO_stabilise_regime = {
	if = {
		limit = { has_idea = SLO_unstable_regime_idea_4 }
		
		remove_ideas = SLO_unstable_regime_idea_4
	}
	else_if = {
		limit = { has_idea = SLO_unstable_regime_idea_3 }
		
		swap_ideas = {
			remove_idea = SLO_unstable_regime_idea_3
			add_idea = SLO_unstable_regime_idea_4
		}
	}
	else_if = {
		limit = { has_idea = SLO_unstable_regime_idea_2 }
		
		swap_ideas = {
			remove_idea = SLO_unstable_regime_idea_2
			add_idea = SLO_unstable_regime_idea_3
		}
	}
	else_if = {
		limit = { has_idea = SLO_unstable_regime_idea_1 }
		
		swap_ideas = {
			remove_idea = SLO_unstable_regime_idea_1
			add_idea = SLO_unstable_regime_idea_2
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = SLO_unstable_regime_idea_1
				add_idea = SLO_unstable_regime_idea_2
			}
		}
	}
}

SLO_increase_hungarian_integration = {
	add_to_variable = { SLO.hungary_integration_progress = 1 }
	custom_effect_tooltip = SLO_increase_hungarian_integration_tt
}
SLO_increase_czech_integration = {
	add_to_variable = { SLO.czechia_integration_progress = 1 }
	custom_effect_tooltip = SLO_increase_czech_integration_tt
}

SLO_increase_hunt_the_bear_modifier = {
	if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_5 }
		swap_ideas = {
			remove_idea = SLO_hunt_the_bear_idea_5
			add_idea = SLO_hunt_the_bear_idea_6
		}
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_4 }
		swap_ideas = {
			remove_idea = SLO_hunt_the_bear_idea_4
			add_idea = SLO_hunt_the_bear_idea_5
		}
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_3 }
		swap_ideas = {
			remove_idea = SLO_hunt_the_bear_idea_3
			add_idea = SLO_hunt_the_bear_idea_4
		}
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_2 }
		swap_ideas = {
			remove_idea = SLO_hunt_the_bear_idea_2
			add_idea = SLO_hunt_the_bear_idea_3
		}
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_1 }
		swap_ideas = {
			remove_idea = SLO_hunt_the_bear_idea_1
			add_idea = SLO_hunt_the_bear_idea_2
		}
	}
	else = {
		add_ideas = SLO_hunt_the_bear_idea_1
	}
}

SLO_remove_hunt_the_bear_modifier = {
	if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_6 }
		remove_ideas = SLO_hunt_the_bear_idea_6
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_5 }
		remove_ideas = SLO_hunt_the_bear_idea_5
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_4 }
		remove_ideas = SLO_hunt_the_bear_idea_4
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_3 }
		remove_ideas = SLO_hunt_the_bear_idea_3
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_2 }
		remove_ideas = SLO_hunt_the_bear_idea_2
	}
	else_if = {
		limit = { has_idea = SLO_hunt_the_bear_idea_1 }
		remove_ideas = SLO_hunt_the_bear_idea_1
	}
}

SLO_increase_skewer_the_eagle_modifier = {
	if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_5 }
		swap_ideas = {
			remove_idea = SLO_skewer_the_eagle_idea_5
			add_idea = SLO_skewer_the_eagle_idea_6
		}
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_4 }
		swap_ideas = {
			remove_idea = SLO_skewer_the_eagle_idea_4
			add_idea = SLO_skewer_the_eagle_idea_5
		}
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_3 }
		swap_ideas = {
			remove_idea = SLO_skewer_the_eagle_idea_3
			add_idea = SLO_skewer_the_eagle_idea_4
		}
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_2 }
		swap_ideas = {
			remove_idea = SLO_skewer_the_eagle_idea_2
			add_idea = SLO_skewer_the_eagle_idea_3
		}
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_1 }
		swap_ideas = {
			remove_idea = SLO_skewer_the_eagle_idea_1
			add_idea = SLO_skewer_the_eagle_idea_2
		}
	}
	else = {
		add_ideas = SLO_skewer_the_eagle_idea_1
	}
}

SLO_remove_skewer_the_eagle_modifier = {
	if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_6 }
		remove_ideas = SLO_skewer_the_eagle_idea_6
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_5 }
		remove_ideas = SLO_skewer_the_eagle_idea_5
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_4 }
		remove_ideas = SLO_skewer_the_eagle_idea_4
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_3 }
		remove_ideas = SLO_skewer_the_eagle_idea_3
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_2 }
		remove_ideas = SLO_skewer_the_eagle_idea_2
	}
	else_if = {
		limit = { has_idea = SLO_skewer_the_eagle_idea_1 }
		remove_ideas = SLO_skewer_the_eagle_idea_1
	}
}

SLO_get_valid_economy_focuses = {
	clear_array = SLO.economy_focuses_array
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_nationalisation_of_critical_industries } 
			has_completed_focus = SLO_towards_a_socialist_economy
			
			OR = {
				SLO_soc_dem_majority_trigger = yes
				AND = {
					SLO_communists_in_government_trigger = yes
					SLO_soc_dems_in_government_trigger = yes
				}
			}
			SLO_has_a_majority_government_trigger = yes
		}
		
		add_to_array = { SLO.economy_focuses_array = 1 }		#SLO_nationalisation_of_critical_industries
	}
	else_if = {
		limit = { 
			NOT = { has_completed_focus = SLO_towards_a_socialist_economy } 
			
			OR = {
				SLO_soc_dem_majority_trigger = yes
				AND = {
					SLO_communists_in_government_trigger = yes
					SLO_soc_dems_in_government_trigger = yes
				}
			}
			SLO_has_a_majority_government_trigger = yes
		}
		
		add_to_array = { SLO.economy_focuses_array = 2 }		#SLO_towards_a_socialist_economy
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_loosen_union_restrictions } 
			OR = {
				has_completed_focus = SLO_towards_a_socialist_economy
				has_completed_focus = SLO_improve_working_conditions
			}
			
			OR = {
				SLO_soc_dems_in_government_trigger = yes
				SLO_liberals_in_government_trigger = yes
			}
		}
		
		add_to_array = { SLO.economy_focuses_array = 3 }		#SLO_loosen_union_restrictions
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_expand_the_social_safety_net } 
			has_completed_focus = SLO_improve_working_conditions
			
			OR = {
				SLO_soc_dems_in_government_trigger = yes
				SLO_liberals_in_government_trigger = yes
			}
		}
		
		add_to_array = { SLO.economy_focuses_array = 4 }		#SLO_expand_the_social_safety_net
	}
	else_if = {
		limit = { 
			NOT = { has_completed_focus = SLO_improve_working_conditions } 
		}
		
		add_to_array = { SLO.economy_focuses_array = 5 }		#SLO_improve_working_conditions
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_ease_of_doing_business_reforms } 
			has_completed_focus = SLO_cut_import_tariffs
		}
		
		add_to_array = { SLO.economy_focuses_array = 6 }		#SLO_ease_of_doing_business_reforms
	}
	else_if = {
		limit = { 
			NOT = { has_completed_focus = SLO_cut_import_tariffs } 
			has_completed_focus = SLO_cut_bureaucratic_red_tape
			
			NOT = { SLO_nationalists_in_government_trigger = yes }
		}
		
		add_to_array = { SLO.economy_focuses_array = 7 }		#SLO_cut_import_tariffs
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_prioritize_small_businesses } 
			has_completed_focus = SLO_protectionism
		}
		
		add_to_array = { SLO.economy_focuses_array = 8 }		#SLO_prioritize_small_businesses
	}
	else_if = {
		limit = { 
			NOT = { has_completed_focus = SLO_protectionism } 
			OR = {
					has_completed_focus = SLO_cut_bureaucratic_red_tape
					has_completed_focus = SLO_farming_subsidies
			}
			
			NOT = { SLO_liberals_in_government_trigger = yes }
		}
		
		add_to_array = { SLO.economy_focuses_array = 9 }		#SLO_protectionism
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_cut_bureaucratic_red_tape } 
		}
		
		add_to_array = { SLO.economy_focuses_array = 10 }		#SLO_cut_bureaucratic_red_tape
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_farming_subsidies } 
			
			NOT = { SLO_liberals_in_government_trigger = yes }
		}
		
		add_to_array = { SLO.economy_focuses_array = 11 }		#SLO_farming_subsidies
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_expand_arms_exports } 
		}
		
		add_to_array = { SLO.economy_focuses_array = 12 }		#SLO_expand_arms_exports
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_infrastructure_focus } 
		}
		
		add_to_array = { SLO.economy_focuses_array = 13 }		#SLO_infrastructure_focus
	}
	
	if = {
		limit = { 
			NOT = { has_completed_focus = SLO_new_research_grants } 
			has_completed_focus = SLO_expand_the_university_of_bratislava
		}
		
		add_to_array = { SLO.economy_focuses_array = 14 }		#SLO_new_research_grants
	}
	else_if = {
		limit = { 
			NOT = { has_completed_focus = SLO_expand_the_university_of_bratislava } 
		}
		
		add_to_array = { SLO.economy_focuses_array = 15 }		#SLO_expand_the_university_of_bratislava
	}
}