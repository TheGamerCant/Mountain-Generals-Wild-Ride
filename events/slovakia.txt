add_namespace = slovakia

#For Czechoslovakia - MG demands peace!
country_event = {
	id = slovakia.1
	title = slovakia.1.title
	desc = slovakia.1.desc
	is_triggered_only = yes
	picture = GFX_report_event_bul_troops_dobrudja

	option = { 
		name = slovakia.1.a
		ai_chance = {
			base = 10
		}
		
		SLO = { country_event = { id = slovakia.2 hours = 2 random_hours = 6 } }
	}
}

country_event = {
	id = slovakia.2
	title = slovakia.2.title
	desc = slovakia.2.desc
	is_triggered_only = yes
	picture = GFX_report_event_crowd_in_prague

	option = { 
		name = slovakia.2.a
		ai_chance = {
			base = 10
		}
		if = {
			limit = { has_idea = SLO_bratislavan_uprising_idea }
			remove_ideas = SLO_bratislavan_uprising_idea
		}
		
		#Timed idea, no need to remove
#		if = {
#			limit = { has_idea = SLO_battle_of_brno_idea }
#			remove_ideas = SLO_battle_of_brno_idea
#		}
		ROOT = {
			white_peace = CZE
			transfer_state = 70
			transfer_state = 71
			transfer_state = 664
			transfer_state = 73 
			
			remove_state_core = 73
		}
		CZE = { 
			remove_state_core = 70
			remove_state_core = 71
			remove_state_core = 664
			remove_state_core = 73
			
			if = {
				limit = { has_idea = CZE_divided_nation }
				remove_ideas = CZE_divided_nation
			}
			set_cosmetic_tag = CZE_ONLY
			
			hidden_effect = {
				retire_character = CZE_rudolf_viest
				retire_character = CZE_jan_golian
				retire_character = CZE_vojtech_tuka
				retire_character = CZE_ferdinand_catlos
				retire_character = CZE_jozef_tiso
			}
		}
		
#		set_division_template_lock = {
#			division_template = "Milície"
#			is_locked = no
#		}

		delete_units = {
			division_template = "Milície"
			disband = no	#We don't get their manpower of equipment
		}
		
		hidden_effect = { 
			#News about our success!
			news_event = { id = slovakia_news.1 hours = 6 random_hours = 4 } 
			
			#Econony :(
			country_event = { id = slovakia.20 days = 6 random_days = 15 }
		}
	}
}


#Czechoslovak units defect to our cause!
country_event = {
	id = slovakia.3
	title = slovakia.3.title
	desc = slovakia.3.desc
	is_triggered_only = yes

	picture = GFX_report_event_czech_soldiers_02

	option = { 
		name = slovakia.3.a
		ai_chance = {
			base = 10
		}
		CZE = {
			transfer_units_fraction= {
				target = SLO
				target_organization = 1
				source_organization = 0.9
				size = 0
				stockpile_ratio = 0.06
				army_ratio = 0.15
				navy_ratio = 0
				air_ratio = 0.14
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}
		}
		add_manpower = 20000
		add_equipment_to_stockpile = { 
			type = infantry_equipment_1
			amount = 2000
			producer = CZE
		}
		add_equipment_to_stockpile = { 
			type = support_equipment
			amount = 500
			producer = CZE
		}
		add_equipment_to_stockpile = { 
			type = artillery_equipment_1
			amount = 200
			producer = CZE
		}
	}
}

country_event = {
	id = slovakia.4
	title = slovakia.4.title
	desc = slovakia.4.desc
	is_triggered_only = yes
	picture = GFX_report_event_military_planning
	
	immediate = {
		hidden_effect = {
			country_event = { id = slovakia.5 days = 7 random_days = 2 }	#Initial conference event
			country_event = { id = slovakia.6 days = 20 random_days = 10 }	#Crazy pills
			country_event = { id = slovakia.7 days = 12 random_days = 45 }	#Foreign Policy
			country_event = { id = slovakia.8 days = 8 random_days = 47 }	#Powers of government
			country_event = { id = slovakia.9 days = 8 random_days = 42 }	#Economic Policy
		}
	}

	option = { 
		name = slovakia.4.a
		ai_chance = {
			base = 10
		}
		
	}
}

country_event = {
	id = slovakia.5
	title = slovakia.5.title
	desc = slovakia.5.desc
	is_triggered_only = yes
	picture = GFX_report_event_gre_megali_conference_signing

	option = { 
		name = slovakia.5.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.10
		}
		
		add_to_variable = { SLO.mg_fascism_leaning = 10 }
	}
	
	option = { 
		name = slovakia.5.b
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = democratic
			popularity = 0.10
		}
		
		add_to_variable = { SLO.mg_democratic_leaning = 10 }
	}
	
	option = { 
		name = slovakia.5.c
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = neutrality
			popularity = 0.10
		}
		
		add_to_variable = { SLO.mg_neutrality_leaning = 10 }
	}
	
	option = { 
		name = slovakia.5.d
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = communism
			popularity = 0.10
		}
		
		add_to_variable = { SLO.mg_communism_leaning = 10 }
	}
}

country_event = {
	id = slovakia.6
	title = slovakia.6.title
	desc = slovakia.6.desc
	is_triggered_only = yes
	picture = GFX_report_event_SLO_mg_pills

	option = { 
		name = slovakia.6.a
		ai_chance = {
			base = 10
		}
	}
	option = { 
		name = slovakia.6.b
		ai_chance = {
			base = 10
		}
		add_stability = -0.05
		
		add_to_variable = { SLO.mg_crazyness = 1 }
		custom_effect_tooltip = SLO_mg_goes_crazy_tt
	}
}

country_event = {
	id = slovakia.7
	title = slovakia.7.title
	desc = slovakia.7.desc
	is_triggered_only = yes
	picture = GFX_report_event_gre_megali_conference_signing

	option = { 
		name = slovakia.7.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		add_war_support = 0.02

		add_to_variable = { SLO.mg_fascism_leaning = 5 }
		add_to_variable = { SLO.mg_neutrality_leaning = 5 }
	}
	
	option = { 
		name = slovakia.7.b
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		
		add_stability = 0.02
		
		add_to_variable = { SLO.mg_democratic_leaning = 5 }
		add_to_variable = { SLO.mg_communism_leaning = 5 }
	}	
}

country_event = {
	id = slovakia.8
	title = slovakia.8.title
	desc = slovakia.8.desc
	is_triggered_only = yes
	picture = GFX_report_event_gre_megali_conference_signing

	option = { 
		name = slovakia.8.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.025
		}
		add_stability = 0.02

		add_to_variable = { SLO.mg_democratic_leaning = 5 }
		add_to_variable = { SLO.mg_communism_leaning = 2.50 }
	}

	option = { 
		name = slovakia.8.b
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.025
		}
		add_political_power = 20

		add_to_variable = { SLO.mg_neutrality_leaning = 5 }
		add_to_variable = { SLO.mg_communism_leaning = 2.50 }
	}

	option = { 
		name = slovakia.8.c
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.08
		}
		add_popularity = {
			ideology = democratic
			popularity = -0.05
		}
		add_stability = -0.05
		add_political_power = 60

		add_to_variable = { SLO.mg_fascism_leaning = 8 }
		subtract_from_variable = { SLO.mg_democratic_leaning = 5 }
		
		add_to_variable = { SLO.mg_crazyness = 1 }
		custom_effect_tooltip = SLO_mg_goes_crazy_tt
	}
}

country_event = {
	id = slovakia.9
	title = slovakia.9.title
	desc = slovakia.9.desc
	is_triggered_only = yes
	picture = GFX_report_event_gre_megali_conference_signing

	option = { 
		name = slovakia.9.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = democratic
			popularity = 0.075
		}

		add_to_variable = { SLO.mg_democratic_leaning = 7.50 }
	}
	
	option = { 
		name = slovakia.9.b
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = neutrality
			popularity = 0.075
		}

		add_to_variable = { SLO.mg_neutrality_leaning = 7.50 }
	}
	
	option = { 
		name = slovakia.9.c
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.075
		}

		add_to_variable = { SLO.mg_fascism_leaning = 7.50 }
	}
	
	option = { 
		name = slovakia.9.d
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = communism
			popularity = 0.075
		}

		add_to_variable = { SLO.mg_communism_leaning = 7.50 }
	}
}

country_event = {
	id = slovakia.10
	title = slovakia.10.title
	desc = slovakia.10.desc
	is_triggered_only = yes
	picture = GFX_report_event_communists_cheer

	option = { 
		name = slovakia.10.a
		ai_chance = {
			base = 10
		}
		
		hidden_effect = {
			#Fascism
			if = {
				limit = {
					check_variable = { var = SLO.mg_fascism_leaning value = SLO.mg_democratic_leaning compare = greater_than_or_equals }
					check_variable = { var = SLO.mg_fascism_leaning value = SLO.mg_communism_leaning compare = greater_than_or_equals }
					check_variable = { var = SLO.mg_fascism_leaning value = SLO.mg_neutrality_leaning compare = greater_than_or_equals }
				}
				
				if = { 
					limit = { check_variable = { SLO.mg_crazyness = 2 } }
					country_event = slovakia.11
				}
				else = { country_event = slovakia.12 }
			}
			#Neutrality
			else_if = {
				limit = {
					check_variable = { var = SLO.mg_neutrality_leaning value = SLO.mg_democratic_leaning compare = greater_than_or_equals }
					check_variable = { var = SLO.mg_neutrality_leaning value = SLO.mg_communism_leaning compare = greater_than_or_equals }
				}
				country_event = slovakia.13
			}
			#Democracy
			else_if = {
				limit = {
					check_variable = { var = SLO.mg_democratic_leaning value = SLO.mg_communism_leaning compare = greater_than_or_equals }
				}
				country_event = slovakia.14
			}
			#Communism
			else = {
				if = { 
					limit = { check_variable = { SLO.mg_crazyness = 2 } }
					country_event = slovakia.15
				}
				else_if = { 
					limit = { check_variable = { SLO.mg_crazyness = 1 } }
					country_event = slovakia.16
				}
				else = { country_event = slovakia.17 }
			}
		}
		
		clear_variable = SLO.mg_fascism_leaning
		clear_variable = SLO.mg_democratic_leaning
		clear_variable = SLO.mg_neutrality_leaning
		clear_variable = SLO.mg_communism_leaning
		clear_variable = SLO.mg_crazyness

	}
}

#Fascism crazy
country_event = {
	id = slovakia.11
	title = slovakia.11.title
	desc = slovakia.11.desc
	is_triggered_only = yes
	picture = GFX_report_event_gre_political_march

	option = { 
		name = slovakia.11.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_a_based_slovakia
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}

#Fascism "normal"
country_event = {
	id = slovakia.12
	title = slovakia.12.title
	desc = slovakia.12.desc
	is_triggered_only = yes
	picture = GFX_report_event_lithuania_army

	option = { 
		name = slovakia.12.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_strong_leader_strong_slovakia
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}

#Despotism
country_event = {
	id = slovakia.13
	title = slovakia.13.title
	desc = slovakia.13.desc
	is_triggered_only = yes
	picture = GFX_report_event_hol_cabinet_gerbrandy

	option = { 
		name = slovakia.13.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_a_democracy_if_you_can_keep_it
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}

#Democracy
country_event = {
	id = slovakia.14
	title = slovakia.14.title
	desc = slovakia.14.desc
	is_triggered_only = yes
	picture = GFX_report_event_sanation_left_victory

	option = { 
		name = slovakia.14.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_a_shining_city_for_all_to_see
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			remove_ideas = SLO_unclear_ideology_idea
		}
	}
}

#Stalinism
country_event = {
	id = slovakia.15
	title = slovakia.15.title
	desc = slovakia.15.desc
	is_triggered_only = yes
	picture = GFX_report_event_soviet_purge_trial

	option = { 
		name = slovakia.15.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_socialism_above_all
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}

#Anarchism
country_event = {
	id = slovakia.16
	title = slovakia.16.title
	desc = slovakia.16.desc
	is_triggered_only = yes
	picture = GFX_report_event_tur_kurdish_guerillas

	option = { 
		name = slovakia.16.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_the_black_spot_of_europe
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}

#Socialism
country_event = {
	id = slovakia.17
	title = slovakia.17.title
	desc = slovakia.17.desc
	is_triggered_only = yes
	picture = GFX_report_event_communists_cheer

	option = { 
		name = slovakia.17.a
		ai_chance = {
			base = 10
		}
		
		complete_national_focus = SLO_the_workers_paradise
		mark_focus_tree_layout_dirty = yes
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		if = { 
			limit = { has_idea = SLO_unclear_ideology_idea }
			swap_ideas = {
				remove_idea = SLO_unclear_ideology_idea
				add_idea = SLO_unstable_regime_idea
			}
		}
	}
}


#Denounce Hungary Fascist
country_event = {
	id = slovakia.18
	title = slovakia.18.title
	desc = slovakia.18.desc
	is_triggered_only = yes
	picture = GFX_report_event_communist_leader

	option = { 
		name = slovakia.18.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		add_political_power = 50
		HUN = { add_opinion_modifier = { target = ROOT modifier = hostile_status } }
	}
}

#Denounce Germany Fascist
country_event = {
	id = slovakia.19
	title = slovakia.19.title
	desc = slovakia.19.desc
	is_triggered_only = yes
	picture = GFX_report_event_communist_leader

	option = { 
		name = slovakia.19.a
		ai_chance = {
			base = 10
		}
		
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		add_political_power = 50
		GER = { add_opinion_modifier = { target = ROOT modifier = hostile_status } }
	}
}

#Economic Turmoil
country_event = {
	id = slovakia.20
	title = slovakia.20.title
	desc = slovakia.20.desc
	is_triggered_only = yes
	picture = GFX_report_event_generic_construction_site

	option = { 
		name = slovakia.20.a
		ai_chance = {
			base = 10
		}
		
		add_to_variable = { SLO_economy_dm_consumer_goods_factor = 0.20 }
		add_to_variable = { SLO_economy_dm_political_power_cost = 0.25 }
		add_to_variable = { SLO_economy_dm_industrial_capacity_factory = -0.15 }
		add_to_variable = { SLO_economy_dm_industrial_capacity_dockyard = -0.15 }
		add_to_variable = { SLO_economy_dm_production_factory_max_efficiency_factor = -0.10 }
		
		custom_effect_tooltip = slovakia.20.tt
	}
}

#Andrej Hlinka dies
country_event = {
	id = slovakia.21
	title = slovakia.21.title
	desc = slovakia.21.desc
	is_triggered_only = yes
	picture = GFX_report_event_generic_funeral

	option = { 
		name = slovakia.21.a
		ai_chance = {
			base = 10
		}
		
		trigger = {
			NOT = {
				has_government = communism
			}
		}
		
		if = {
			limit = { has_idea = SLO_andrej_hlinka }
			remove_ideas = SLO_andrej_hlinka
		}
		
		retire_character = SLO_andrej_hlinka
		
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		
		add_war_support = 0.02
	}
	
	option = { 
		name = slovakia.21.b
		ai_chance = {
			base = 10
		}
		
		trigger = {
			NOT = {
				has_government = fascism
			}
		}
		
		if = {
			limit = { has_idea = SLO_andrej_hlinka }
			remove_ideas = SLO_andrej_hlinka
		}
		
		retire_character = SLO_andrej_hlinka
		
		add_popularity = {
			ideology = fascism
			popularity = -0.05
		}
		
		add_stability = 0.02
	}
}

#I look mountaineer as fuck
country_event = {
	id = slovakia.22
	title = slovakia.22.title
	desc = slovakia.22.desc
	is_triggered_only = yes
	
	picture = GFX_report_event_SOV_young_builders_of_communism

	option = { 
		name = slovakia.22.a
		ai_chance = {
			base = 10
		}
		hidden_effect={
			country_event = { id = slovakia.23 days = 12 }
		}
	}
}

#Kill those who dissent
country_event = {
	id = slovakia.23
	title = slovakia.23.title
	desc = slovakia.23.desc
	is_triggered_only = yes

	option = { 
		name = slovakia.23.a
		ai_chance = {
			base = 10
		}
		70={ add_manpower = -2 }
	}
}

#Slovak Army intro event
country_event = {
	id = slovakia.24
	title = slovakia.24.title
	desc = slovakia.24.desc
	is_triggered_only = yes
	
	picture = GFX_report_event_SLO_military_service

	option = { 
		name = slovakia.24.a
		ai_chance = {
			base = 10
		}
		
		add_political_power = 25
	}
}

#Anti Hungarian racial laws
country_event = {
	id = slovakia.25
	title = slovakia.25.title
	desc = slovakia.25.desc
	is_triggered_only = yes
	picture = GFX_report_event_dead_soldiers

	option = { 
		name = slovakia.25.a
		ai_chance = {
			base = 10
		}
		add_stability = -0.02
		if = {
			limit = { controls_state = 664 }
			664={
				add_manpower = -835
			}
		}
	}
}

#Hungarians Deported
country_event = {
	id = slovakia.26
	title = slovakia.26.title
	desc = slovakia.26.desc
	is_triggered_only = yes
	picture = GFX_report_event_generic_factory

	option = { 
		name = slovakia.26.a
		ai_chance = {
			base = 10
		}
		
		random_owned_controlled_state = {
			prioritize = { 664 73 }
			limit = {
				is_controlled_by = ROOT
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt
		
		add_to_variable = { SLO_economy_dm_consumer_goods_factor = -0.03 }
		custom_effect_tooltip = slovakia.26.tt
	}
}


add_namespace = slovakia_hidden

#Update gfxs
country_event = {
	id = slovakia_hidden.1
	hidden = yes
	
	is_triggered_only = yes

	immediate = { 
		#Each entry of this loop is when the propaganda campaign was set, or -1 if not set
		for_each_loop = {
			array = SLO.propaganda_campaign_dates
			value = v
			index = i
			break = break
			
			if = {
				limit = { NOT = { check_variable = { v = -1 } } }
				
				#Set 'days' to be the days since this campaign was set
				set_variable = { days = global.num_days }
				subtract_from_variable = { days = v }
				
				if = {
					limit = {
						check_variable = { var = days value = SLO.propaganda_days_until_first_change compare = less_than }
					}
					set_variable = { SLO.propaganda_slot_frame_array^i = 3 }
				}
				else_if = {
					limit = {
						check_variable = { var = days value = SLO.propaganda_days_until_first_change compare = greater_than_or_equals }		#We don't NEED this but it makes it easier to understand
						check_variable = { var = days value = SLO.propaganda_days_until_second_change compare = less_than }
					}
					set_variable = { SLO.propaganda_slot_frame_array^i = 4 }
				}
				else_if = {
					set_variable = { SLO.propaganda_slot_frame_array^i = 5 }
				}
				
				clear_variable = days
			}
		}
	}
	
}